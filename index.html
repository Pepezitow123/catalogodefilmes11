<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <h1>Catalogo de filmes</h1>

    <form id="cadastro-filmes">
         <h2>Adicionar Novo Filme</h2>
         <div>
            <label for="titulo">Titulo do Filme</label>
            <input type="text" id="titulo" required>
         </div>

         <div>
            <label for="sinopse">Sinopse:</label>
            <textarea id="sinopse" required></textarea> <!-- Corrigido -->
         </div>

         <button type="submit">Adicionar Filme</button>
    </form>

    <hr>

    <h2>Minha Lista de Filmes</h2>

    <div id="lista-filmes">
        <p>Nenhum filme cadastrado ainda.</p>
    </div>

    <script>
        // 1. ARMMAZENAMENTO DE DADOS
        const catalogo = []; // Array global para armazenar filmes.

        // 2. CAPTURA DE ELEMENTOS DO DOM
        const form = document.getElementById('cadastro-filmes'); // Corrigido 'getElementByID' para 'getElementById'
        const listaFilmesContainer = document.getElementById('lista-filmes');

        //--------------------------------------------------------------------
        //FUNÇÃO DE REMOÇÃO
        //--------------------------------------------------------------------
        function removerFilme(indice, elemenoDOM) {
            // A. REMOÇÃO DO ARRAY (Logica)
            catalogo.splice(indice, 1);

            // B. REMOÇÃO DO DOM (Visual)
            elemenoDOM.remove();

            // Opcional: Atualiza a mensagem da lista se estiver vazia
            if (catalogo.length === 0) { // Corrigido 'lenght' para 'length'
                listaFilmesContainer.innerHTML = '<p>Nenhum filme cadastrado ainda.</p>'; // Corrigido o fechamento da tag <p>
            }

            console.log(`Filme no indice ${indice} removido. Catalogo atualizado:`, catalogo);
        }

        //-------------------------------------------------------------------
        // FUNÇÃO DE RENDERIZAÇÃO
        //-------------------------------------------------------------------
        function renderizarFilme(filme, indice) {
            // Remove a mensagem inicial se for o primeiro filme
            if (catalogo.length === 1) { // Corrigido 'lenght' para 'length'
                listaFilmesContainer.innerHTML = '';
            }

            // A. CRIAÇÃO DE ELEMENTOS HTML (document.createElement)
            const filmeDiv = document.createElement('div'); // Corrigido 'createElemento' para 'createElement'
            filmeDiv.classList.add('filme-item'); // Corrigido o nome da classe 'filme - item' para 'filme-item' (sem o espaço)

            const tituloH3 = document.createElement('h3');
            tituloH3.textContent = filme.titulo;

            const sinopseP = document.createElement('p'); // Corrigido o nome da variável de 'sinipse' para 'sinopseP'
            sinopseP.textContent = filme.sinopse;

            const removerBotao = document.createElement('button');
            removerBotao.textContent = 'Remover';
            removerBotao.classList.add('btn-remover');

            // B. DEFINIÇÃO DE EVENTO DE REMOÇÃO (addEventListener)
            removerBotao.addEventListener('click', () => { // Corrigido 'Click' para 'click'
                removerFilme(indice, filmeDiv);
            });

            // C. ANEXAR ELEMENTOS (appendChild)
            filmeDiv.appendChild(tituloH3);
            filmeDiv.appendChild(sinopseP);
            filmeDiv.appendChild(removerBotao);

            // D. INSERÇÃO NO DOM FINAL
            listaFilmesContainer.appendChild(filmeDiv);
        }

        //----------------------------------------------------------------
        // FUNÇÃO PRINCIPAL DE ADIÇÃO (Manipulador do formulário)
        //----------------------------------------------------------------
        function adicionarFilme(evento) {
            evento.preventDefault(); // Impede o recarregamento da página.

            const tituloInput = document.getElementById('titulo');
            const sinopseInput = document.getElementById('sinopse');

            const novoFilme = {
                titulo: tituloInput.value,
                sinopse: sinopseInput.value
            };

            catalogo.push(novoFilme); // Adiciona o filme ao array 'catalogo'
            renderizarFilme(novoFilme, catalogo.length - 1); // Renderiza o novo filme na tela

            form.reset(); // Limpa o formulário
        }

        // 8. ESCUTANDO O EVENTO DE BOTÃO/FORMULÁRIO
        form.addEventListener('submit', adicionarFilme);

        console.log("JavaScript carregado. Pronto para iniciar o catálogo!");
    </script>
    
</body>
</html>
